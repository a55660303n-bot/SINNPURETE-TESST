<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scent Finder | 香氛診斷</title>
    <style>
        :root { --primary-color: #333; --bg-color: #fcfaf8; }
        body { font-family: "Optima", "serif", "Microsoft JhengHei";
                  margin: 0;
               color: var(--primary-color);
               scroll-behavior: smooth;
    
               /* 新增背景圖設定 */
               background:linear-gradient(135deg,#bcd3c4 0%, #EBEEE9 100%);
               background-size: cover;
               background-position: center;
               background-attachment: fixed; /* 讓背景固定，內容捲動 */
               min-height: 100vh; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; min-height: 100vh; display: flex; flex-direction: column; justify-content: center; }
        .hidden { display: none !important; }
        .card { background: white; padding: 50px 30px; border-radius: 4px; box-shadow: 0 10px 30px rgba(0,0,0,0.03); text-align: center; }
        h2 { font-weight: 300; letter-spacing: 3px; margin-bottom: 40px; line-height: 1.4; }
        .btn { display: block; width: 100%; padding: 18px; margin: 12px 0; border: 1px solid #ddd; background: none; cursor: pointer; transition: 0.4s; font-size: 15px; }
        .btn:hover { border-color: #000; background: #fbfbfb; }
.hero-image-container {
    margin: 30px auto;
    width: 200px; /* 寬度 */
    height: 280px; /* 高度 */
    overflow: hidden;
    /* 拱門形狀的核心：上方圓角 100px 讓它變圓弧 */
    border-radius: 100px 100px 0 0; 
    border: 1px solid #eee; /* 選配：給拱門一個淡淡的邊框感 */
}

.arch-image {
    width: 100%;
    height: 100%;
    object-fit: cover; /* 確保圖片填滿拱門且不變形 */
}

/* 電腦版 LOGO 樣式 */
.header-logo {
    position: absolute;
    top: 30px;    /* 距離上方距離 */
    left: 30px;   /* 距離左邊距離 */
    z-index: 100; /* 確保它在最前面 */
}

.header-logo img {
    height: 50px; /* 這裡調整電腦看的大小 */
    width: auto;
}

/* 關鍵：手機版修正 (當螢幕寬度小於 600px) */
@media (max-width: 600px) {
    .header-logo {
        top: 20px;  /* 手機版稍微往下移一點點 */
        left: 20px; /* 手機版靠邊一點 */
    }
    .header-logo img {
        height: 25px; /* 手機版 LOGO 縮小，才不會佔滿螢幕 */
    }
}
        
        /* 座標圖 */
        .map-wrapper { position: relative; width: 300px; height: 300px; margin: 40px auto; border: 1px solid #eee; background: #fff; }
        .axis-label { position: absolute; font-size: 11px; color: #999; }
        .dot { 
            position: absolute; width: 14px; height: 14px; background: white; 
            border: 2px solid black; border-radius: 50%; transform: translate(-50%, -50%);
            transition: all 2s cubic-bezier(0.34, 1.56, 0.64, 1); z-index: 10;
        }

        /* 產品詳情區 */
        #product-detail { margin-top: 50px; padding: 60px 20px; text-align: center; border-top: 1px solid #eee; }
        .product-img { width: 100%; max-width: 300px; border-radius: 4px; margin-bottom: 20px; background: #eee; }
        .buy-link { display: inline-block; background: #000; color: #fff; padding: 15px 40px; text-decoration: none; margin-top: 20px; }
    </style>
</head>
<body>

<div class="header-logo">
    <img src="logo1.png" alt="Logo">
</div>
<div class="container">
    <div id="start-page" class="card">
        <h2>FIND YOUR SCENT</h2>
        <p>探索專屬於您的正念香氣</p>

        <div class="hero-image-container">
        <img src="cover.jpg" alt="Scent" class="arch-image">
    </div>
        
        <button class="btn" onclick="startQuiz()" style="background:#000; color:#fff;">開始分析</button>
    </div>

    <div id="quiz-page" class="card hidden">
        <p id="progress" style="font-size:12px; color:#aaa;"></p>
        <h2 id="question-text"></h2>
        <div id="options-container"></div>
    </div>

    <div id="result-page" class="card hidden">
        <h2>FRAGRANCE MAP</h2>
        <div class="map-wrapper">
            <div id="target-dot" class="dot" style="left: 50%; top: 50%;"></div>
            <div class="axis-label" style="top: -25px; left: 50%; transform: translateX(-50%);">木質調</div>
            <div class="axis-label" style="bottom: -25px; left: 50%; transform: translateX(-50%);">花香調</div>
            <div class="axis-label" style="left: -45px; top: 50%; transform: translateY(-50%);">甜美</div>
            <div class="axis-label" style="right: -45px; top: 50%; transform: translateY(-50%);">清爽</div>
        </div>
        <p id="status-text">正在計算您的專屬香氣...</p>
    </div>

    <div id="product-detail" class="card hidden">
        <img id="p-img" src="" alt="產品圖片" class="product-img">
        <h3 id="p-name"></h3>
        <p id="p-desc" style="color:#666; font-size:14px;"></p>
        <a id="p-link" href="#" target="_blank" class="buy-link">立即購買</a>
        <button class="btn" onclick="location.reload()" style="margin-top:30px; border:none; text-decoration:underline;">重新測驗</button>
    </div>
</div>

<script>
    // 1. 產品座標與資料 
    const productData = {
        oil: [
            { name: "香氛多用油/心靈淨化 (Purification of Mind)", x: 0.7, y: 0.7, img: "https://shoplineimg.com/68527c28c56c870042c966e9/688b940383a3a536e3e145ef/720x.webp?source_format=jpg", link: "https://www.sinnpurete.com.tw/products/%E9%A6%99%E6%B0%9B%E5%A4%9A%E7%94%A8%E6%B2%B9purification-of-mind-%E5%BF%83%E9%9D%88%E6%B7%A8%E5%8C%96" },
            { name: "香氛多用油/黑石 (BLACK STONE)", x: -0.6, y: 0.6, img: "https://shoplineimg.com/68527c28c56c870042c966e9/688b984396908c00103bf900/800x.webp?source_format=jpg", link: "https://www.sinnpurete.com.tw/products/%E9%A6%99%E6%B0%9B%E5%A4%9A%E7%94%A8%E6%B2%B9purification-of-mind-%E5%BF%83%E9%9D%88%E6%B7%A8%E5%8C%96-1-1-1" },
            { name: "香氛多用油/激情喚醒 (Passionate Awakening)", x: 0, y: 0.1, img: "https://shoplineimg.com/68527c28c56c870042c966e9/688b9658d7d596001420bed3/800x.webp?source_format=jpg", link: "https://www.sinnpurete.com.tw/products/%E9%A6%99%E6%B0%9B%E5%A4%9A%E7%94%A8%E6%B2%B9purification-of-mind-%E5%BF%83%E9%9D%88%E6%B7%A8%E5%8C%96-1" },
            { name: "香氛多用油/靜與能量 (Stillness and Energy)", x: -1, y: 0, img: "https://shoplineimg.com/68527c28c56c870042c966e9/688b97894c96220018871496/800x.webp?source_format=jpg", link: "https://www.sinnpurete.com.tw/products/%E9%A6%99%E6%B0%9B%E5%A4%9A%E7%94%A8%E6%B2%B9purification-of-mind-%E5%BF%83%E9%9D%88%E6%B7%A8%E5%8C%96-1-1" },
            { name: "香氛多用油/內田理央聯名款 (Velvet Touch)", x: -0.7, y: -0.7, img: "https://shoplineimg.com/68527c28c56c870042c966e9/690c1a6332300b0012686f16/800x.webp?source_format=jpg", link: "https://www.sinnpurete.com.tw/products/%E9%A6%99%E6%B0%9B%E5%A4%9A%E7%94%A8%E6%B2%B9purification-of-mind-%E5%BF%83%E9%9D%88%E6%B7%A8%E5%8C%96-1-1-1-2" }
        ],
        room: [
            { name: "無酒精正念香氛/心靈淨化 (Purification of Mind)", x: 0.7, y: 0.7, img: "https://shoplineimg.com/68527c28c56c870042c966e9/688d8f8077978800121021b6/800x.webp?source_format=png", link: "https://www.sinnpurete.com.tw/products/%E7%84%A1%E9%85%92%E7%B2%BE%E6%AD%A3%E5%BF%B5%E9%A6%99%E6%B0%9Bpassionate-awakening%E6%BF%80%E6%83%85%E5%96%9A%E9%86%92-1" },
            { name: "無酒精正念香氛/激情喚醒 (Passionate Awakening)", x: 0, y: 0.2, img: "https://shoplineimg.com/68527c28c56c870042c966e9/688b900053d0780014574b1f/800x.webp?source_format=png", link: "https://www.sinnpurete.com.tw/products/%E7%84%A1%E9%85%92%E7%B2%BE%E6%AD%A3%E5%BF%B5%E9%A6%99%E6%B0%9Bpassionate-awakening%E6%BF%80%E6%83%85%E5%96%9A%E9%86%92" },
            { name: "無酒精正念香氛/悟空好眠 (Dream Catcher)", x: -0.7, y: -0.2, img: "https://shoplineimg.com/68527c28c56c870042c966e9/690c135c13d259000cbb2168/800x.webp?source_format=jpg", link: "https://www.sinnpurete.com.tw/products/%E7%84%A1%E9%85%92%E7%B2%BE%E6%AD%A3%E5%BF%B5-dream-catcher%E9%A6%99%E6%B0%9B%E6%82%9F%E7%A9%BA%E5%A5%BD%E7%9C%A0" }
        ],
        perfume: [
            { name: "淡香精EDP/追求幸福 (Pursuit of Happiness)", x: -0.4, y: 0.7, img: "https://shoplineimg.com/68527c28c56c870042c966e9/688b9dd9524dd30018b1aaf4/800x.webp?source_format=jpg", link: "https://www.sinnpurete.com.tw/products/%E9%A6%99%E6%B0%9B%E5%A4%9A%E7%94%A8%E6%B2%B9purification-of-mind-%E5%BF%83%E9%9D%88%E6%B7%A8%E5%8C%96-1-1-1-1-1-1-2-1" },
            { name: "淡香精EDP/黑石 (BLACK STONE)", x: -0.6, y: 0.6, img: "https://shoplineimg.com/68527c28c56c870042c966e9/688b9e5274bec500105ca1e1/540x.webp?source_format=jpg", link: "https://www.sinnpurete.com.tw/products/%E9%A6%99%E6%B0%9B%E5%A4%9A%E7%94%A8%E6%B2%B9purification-of-mind-%E5%BF%83%E9%9D%88%E6%B7%A8%E5%8C%96-1-1-1-1-1-1-2-1-1" },
            { name: "淡香精EDP/感官與魅力 (Sense & Sensuality)", x: 0.6, y: 0.4, img: "https://shoplineimg.com/68527c28c56c870042c966e9/688b9d3bf86d64001467bc1a/800x.webp?source_format=jpg", link: "https://www.sinnpurete.com.tw/products/%E9%A6%99%E6%B0%9B%E5%A4%9A%E7%94%A8%E6%B2%B9purification-of-mind-%E5%BF%83%E9%9D%88%E6%B7%A8%E5%8C%96-1-1-1-1-1-1-2" },
            { name: "淡香精EDP/苦橙與歐白芷 (Bitter Orange & Angelica)", x: 0.55, y: 0, img: "https://shoplineimg.com/68527c28c56c870042c966e9/688b99ccfcf7b70016615110/800x.webp?source_format=jpg", link: "https://www.sinnpurete.com.tw/products/%E9%A6%99%E6%B0%9B%E5%A4%9A%E7%94%A8%E6%B2%B9purification-of-mind-%E5%BF%83%E9%9D%88%E6%B7%A8%E5%8C%96-1-1-1-1" },
            { name: "淡香精EDP/無花果與無花果葉 (Fig & Fig Leaf)", x: -0.5, y: 0, img: "https://shoplineimg.com/68527c28c56c870042c966e9/688b9bbd544e9700111d2dfa/720x.webp?source_format=jpg", link: "https://www.sinnpurete.com.tw/products/%E9%A6%99%E6%B0%9B%E5%A4%9A%E7%94%A8%E6%B2%B9purification-of-mind-%E5%BF%83%E9%9D%88%E6%B7%A8%E5%8C%96-1-1-1-1-1-1/" },
            { name: "淡香精EDP/黑莓與茉莉 (Blackberry & Jasmine)", x: -0.5, y: -0.7, img: "https://shoplineimg.com/68527c28c56c870042c966e9/688b9aecd7d596001820c1b9/800x.webp?source_format=jpg", link: "https://www.sinnpurete.com.tw/products/%E9%A6%99%E6%B0%9B%E5%A4%9A%E7%94%A8%E6%B2%B9purification-of-mind-%E5%BF%83%E9%9D%88%E6%B7%A8%E5%8C%96-1-1-1-1-1" },
            { name: "淡香精EDP/內田理央聯名款 (Mandarin & Orange)", x: 0.7, y: -0.8, img: "https://shoplineimg.com/68527c28c56c870042c966e9/688b9c3e358dd60010d4d3b5/800x.webp?source_format=jpg", link: "https://www.sinnpurete.com.tw/products/%E9%A6%99%E6%B0%9B%E5%A4%9A%E7%94%A8%E6%B2%B9purification-of-mind-%E5%BF%83%E9%9D%88%E6%B7%A8%E5%8C%96-1-1-1-1-1-1-1" }
        ]
    };

    const questions = [
        { text: "挑選這款香氣，是為了陪伴你什麼樣的時刻？", options: [{ t: "自我修護與按摩", type: "oil" }, { t: "空間氛圍切換", type: "room" }, { t: "展現個人氣場", type: "perfume" }] },
        { text: "「重要日子」的香水，你希望它帶給你什麼力量？", options: [{ t: "溫暖且亮眼的自信", x: -1 }, { t: "精緻且低調的平衡", x: 0 }, { t: "俐落且清新的專業", x: 1 }] },
        { text: "脆弱無助時，哪種氣息能像護身符般擁抱你？", options: [{ t: "沈穩的大地與木頭", y: 1 }, { t: "輕盈的草本與綠葉", y: 0 }, { t: "柔和優雅的花朵", y: -1 }] },
        { text: "想像一個屬於你的私密空間，牆面應該是什麼顏色？", options: [{ t: "暖黃或藕粉色", x: -1 }, { t: "純白或淺灰色", x: 0 }, { t: "冷藍或森林綠", x: 1 }] },
        { text: "哪個形容詞最符合你追求的靈魂狀態？", options: [{ t: "深邃與安定", y: 1 }, { t: "自由與靈動", y: 0 }, { t: "優雅與迷人", y: -1 }] }
    ];

    let currentStep = 0, scoreX = 0, scoreY = 0, selectedType = "";

    function startQuiz() {
        document.getElementById('start-page').classList.add('hidden');
        document.getElementById('quiz-page').classList.remove('hidden');
        showQuestion();
    }

    function showQuestion() {
        const q = questions[currentStep];
        document.getElementById('progress').innerText = `Step ${currentStep + 1} / 5`;
        document.getElementById('question-text').innerText = q.text;
        const container = document.getElementById('options-container');
        container.innerHTML = "";
        
        q.options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = "btn";
            btn.innerText = opt.t;
            btn.onclick = () => {
                if (opt.type) selectedType = opt.type;
                if (opt.x !== undefined) scoreX += opt.x;
                if (opt.y !== undefined) scoreY += opt.y;
                currentStep++;
                if (currentStep < questions.length) showQuestion(); else showResult();
            };
            container.appendChild(btn);
        });
    }

   function showResult() {
    // 隱藏測驗頁，顯示結果頁
    document.getElementById('quiz-page').classList.add('hidden');
    document.getElementById('result-page').classList.remove('hidden');

    // --- 【核心功能：自動切換地圖背景】 ---
    const mapElement = document.querySelector('.map-wrapper');
    
    // 根據第一題選擇的分類 (selectedType) 匹配圖片檔名
    // 請確保你上傳到 GitHub 的檔名與下面引號內的文字完全一致（包含中英文與大小寫）
    let bgImage = "";
    if (selectedType === 'oil') {
        bgImage = "香氛多用油香氛圖譜.jpg.jpg";
    } else if (selectedType === 'room') {
        bgImage = "MAP.jpg"; // 正念香氛圖譜
    } else if (selectedType === 'perfume') {
        bgImage = "淡香精圖譜.jpg";
    }

    if (bgImage !== "") {
        mapElement.style.backgroundImage = `url('${bgImage}')`;
        mapElement.style.backgroundSize = "cover";
        mapElement.style.backgroundPosition = "center";
        mapElement.style.border = "none"; // 移除邊框讓地圖更美觀
    }
    // ------------------------------------

    // 計算最近產品 (歐幾里得距離)
    const userX = scoreX / 2; 
    const userY = scoreY / 2;
    let closest = null;
    let minD = Infinity;

    productData[selectedType].forEach(p => {
        const d = Math.sqrt(Math.pow(userX - p.x, 2) + Math.pow(userY - p.y, 2));
        if (d < minD) {
            minD = d;
            closest = p;
        }
    });

    // 圓點移動動畫
    setTimeout(() => {
        const dot = document.getElementById('target-dot');
        const leftPerc = ((scoreX + 2) / 4) * 80 + 10;
        const topPerc = 100 - (((scoreY + 2) / 4) * 80 + 10);
        dot.style.left = `${leftPerc}%`;
        dot.style.top = `${topPerc}%`;
    }, 300);

    // 延遲顯示詳細資訊並自動滑動
    setTimeout(() => {
        const detail = document.getElementById('product-detail');
        detail.classList.remove('hidden');
        document.getElementById('p-name').innerText = closest.name;
        document.getElementById('p-img').src = closest.img;
        document.getElementById('p-link').href = closest.link;
        document.getElementById('status-text').innerText = "為您尋得的專屬氣息：";
        
        detail.scrollIntoView({ behavior: 'smooth' });
    }, 2500);
}
</script>

</body>

</html>










